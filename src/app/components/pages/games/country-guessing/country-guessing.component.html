<app-game-template
  [level]="currentLevel"
  [questionsCorrectInLevel]="questionsCorrectInLevel"
  [currentQuestion]="currentQuestionNumber"
  [timeElapsed]="timeElapsed"
  [currentWord]="currentQuestionData?.correctAnswer || ''"
  [difficulty]="currentDifficulty"
  [totalQuestions]="5"
>  
  <div class="game-layout">
    
    <!-- ===== QUESTION SECTION ===== -->
    <div class="question-section">
      <div class="card-title">
          Quel est ce pays ?
      </div>
    </div>

    <!-- ===== IMAGE SECTION ===== -->
    <div class="image-section" *ngIf="!isLoading && !showLevelComplete">
      <div class="image-card">
        <img [src]="currentQuestionData?.image" 
             class="country-image" 
             alt="Country Image"
             [@fadeIn]>
      </div>
    </div>

    <!-- ===== ANSWER SECTION ===== -->
    <div class="answer-section" *ngIf="!isLoading && !showLevelComplete">
      <div class="answer-grid">
        <div *ngFor="let option of currentQuestionData?.options; let i = index" 
             class="option-btn"
             [ngClass]="{
               'selected': selectedAnswer === option && !showResult,
               'btn-success': showResult && option === currentQuestionData?.correctAnswer,
               'btn-danger': showResult && selectedAnswer === option && !isCorrect,
               'correct-answer': showResult && option === currentQuestionData?.correctAnswer && !isCorrect && selectedAnswer !== option
             }"
             (click)="!showResult && selectAnswer(option)">
          
          <div class="answer-content">
            <!-- Option Badge (A, B, C, D) -->
            <div class="option-badge">
              {{ getOptionLetter(i) }}
            </div>
            
            <!-- Option Text -->
            <div class="option-text">
              {{ option }}
            </div>
            
            <!-- Result Icon -->
            <div class="result-icon" *ngIf="showResult">
              <i *ngIf="option === currentQuestionData?.correctAnswer" class="fas fa-check"></i>
              <i *ngIf="selectedAnswer === option && !isCorrect" class="fas fa-times"></i>
            </div>
          </div>
        </div>
      </div>
    </div>
    
  
    
    <!-- ===== ACTION SECTION ===== -->
    <div class="action-section" *ngIf="!isLoading && !showLevelComplete">
      <div class="action-card">
        <button class="game-btn" 
                [disabled]="!selectedAnswer" 
                (click)="nextQuestion()"
                [ngClass]="{'ready': selectedAnswer}">
          
          <span class="button-text">
            {{ currentQuestionNumber <= QUESTIONS_PER_LEVEL ? 'Question suivante' : 'Terminer le niveau' }}
          </span>
          
          <div class="button-icon">
            <i *ngIf="currentQuestionNumber < QUESTIONS_PER_LEVEL" class="fas fa-arrow-right"></i>
            <i *ngIf="currentQuestionNumber >= QUESTIONS_PER_LEVEL" class="fas fa-flag-checkered"></i>
          </div>
        </button>
        
      </div>
    </div>

    <!-- ===== LOADING SECTION ===== -->
    <div class="loading-section" *ngIf="isLoading">
      <div class="loading-card">
        <div class="spinner-border text-primary" role="status"></div>
        <div class="loading-text mt-3">Chargement des pays...</div>
      </div>
    </div>

  

  </div>

  <!-- Level Completion Celebration -->
  <app-celebration 
    *ngIf="showLevelComplete"
    [show]="showLevelComplete"
    [nextLevel]="currentLevel + 1"
    [data]="getCelebrationData()"
    (close)="onCloseCelebration()"
    (goToNext)="onNextLevel()">
  </app-celebration>

</app-game-template>
