<app-game-template
  [level]="level"
  [questionsCorrectInLevel]="questionsCorrectInLevel"
  [currentQuestion]="currentQuestion"
  [timeElapsed]="timeElapsed"
  [currentWord]="currentWord?.correct || ''"
  [difficulty]="currentWord?.difficulty || 'easy'"
  [totalQuestions]="5"
  >
  <div class="enhanced-game-content" [class.shake]="shakeAnimation">
    
    <!-- Main Game Area -->
    <div class="game-main ">
      <!-- Image Section -->
      <div class="image-section">
        <div class="image-container">
          <img [src]="currentWord?.image || ''" 
               alt="Guess this word" 
               class="word-image"
               [class.correct]="showSuccess">
       
        </div>
      </div>
      <!-- Letters Section -->
      <div class="letters-section ">

          
          <div class="available-area">
          <div class="letter-bank"
               (dragover)="onDragOver($event)"
               (drop)="onDropToAvailable($event)">
               
            <div class="letter-tile" 
                 *ngFor="let item of availableLetters; let i = index; trackBy: trackByLetterId" 
                 draggable="true"
                 [style.background-color]="item.color"
                 [class.dragging]="item.isDragging"
                 (dragstart)="onDragStart($event, item, undefined, i)"
                 (dragend)="onDragEnd($event, item)">
              <span class="letter-text">{{ item.letter }}</span>
            </div>
          </div>

        <!-- Word Slots -->
        <div class="word-area">
          <div class="word-slots">
            <div class="word-slot" 
                 *ngFor="let slot of wordSlots; let i = index" 
                 [class.filled]="slot"
                 [class.correct]="slot?.isCorrect"
                 (dragover)="onDragOver($event)"
                 (drop)="onDropToSlot($event, i)">
              <div *ngIf="slot" 
                   draggable="true"
                   [style.background-color]="slot.color"
                   class="slot-letter-tile"
                   (dragstart)="onDragStart($event, slot, i)"
                   (dragend)="onDragEnd($event, slot)">
                {{ slot.letter }}
              </div>
              <span class="slot-placeholder" *ngIf="!slot">{{ i + 1 }}</span>
            </div>
          </div>
        </div>

      </div>
     
      </div>
  
    </div>
 <!-- Wrong Message -->
 <div class="wrong-message" *ngIf="showWrong">
   <span>‚ùå Wrong!</span>
 </div>
 
 <!-- Bootstrap Modal -->
 <div class="modal fade" 
      [class.show]="showLevelCompleteModal" 
      [style.display]="showLevelCompleteModal ? 'block' : 'none'"
      tabindex="-1" 
      role="dialog" 
      aria-labelledby="levelCompleteModalLabel" 
      aria-hidden="true">
   <div class="modal-dialog modal-dialog-centered" role="document">
     <div class="modal-content celebration-modal">
       <div class="modal-header border-0">
         <h5 class="modal-title" id="levelCompleteModalLabel">
           üéâ Congratulations! üéâ
         </h5>
         <button type="button" class="btn-close" (click)="continueToNextLevel()" aria-label="Close"></button>
       </div>
       <div class="modal-body text-center">
         <h4 class="mb-3">You completed Level {{ level }}!</h4>
         <div class="alert alert-success">
           <i class="fas fa-star text-warning"></i>
           All 5 questions answered correctly!
         </div>
         <div class="level-progress mb-3">
           <div class="progress">
             <div class="progress-bar bg-success" role="progressbar" style="width: 100%"></div>
           </div>
         </div>
       </div>
       <div class="modal-footer border-0 justify-content-center">
         <button type="button" class="btn btn-primary btn-lg px-4" (click)="continueToNextLevel()">
           <i class="fas fa-arrow-right me-2"></i>
           Continue to Level {{ level + 1 }}
         </button>
       </div>
     </div>
   </div>
 </div>
  </div>
</app-game-template>