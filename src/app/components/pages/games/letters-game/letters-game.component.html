<app-game-template
  [level]="level"
  [questionsCorrectInLevel]="questionsCorrectInLevel"
  [currentQuestion]="currentQuestion"
  [timeElapsed]="timeElapsed"
  [currentWord]="currentWord?.correct || ''"
  [difficulty]="currentWord?.difficulty || 'easy'"
  [totalQuestions]="5"
  >
  <div class="enhanced-game-content" [class.shake]="shakeAnimation">
    
    <!-- Main Game Area -->
    <div class="game-main ">
      <!-- Image Section -->
      <div class="image-section">
        <div class="image-container">
          <img [src]="currentWord?.image || ''" 
               alt="Guess this word" 
               class="word-image"
               [class.correct]="showSuccess">
       
        </div>
      </div>
      <!-- Letters Section -->
      <div class="letters-section ">

          
          <div class="available-area">
          <div class="letter-bank"
               (dragover)="onDragOver($event)"
               (drop)="onDropToAvailable($event)">
               
            <div class="letter-tile" 
                 *ngFor="let item of availableLetters; let i = index; trackBy: trackByLetterId" 
                 draggable="true"
                 [style.background-color]="item.color"
                 [class.dragging]="item.isDragging"
                 (dragstart)="onDragStart($event, item, undefined, i)"
                 (dragend)="onDragEnd($event, item)">
              <span class="letter-text">{{ item.letter }}</span>
            </div>
          </div>

        <!-- Word Slots -->
        <div class="word-area">
          <div class="word-slots">
            <div class="word-slot" 
                 *ngFor="let slot of wordSlots; let i = index" 
                 [class.filled]="slot"
                 [class.correct]="slot?.isCorrect"
                 (dragover)="onDragOver($event)"
                 (drop)="onDropToSlot($event, i)">
              <div *ngIf="slot" 
                   draggable="true"
                   [style.background-color]="slot.color"
                   class="slot-letter-tile"
                   (dragstart)="onDragStart($event, slot, i)"
                   (dragend)="onDragEnd($event, slot)">
                {{ slot.letter }}
              </div>
              <span class="slot-placeholder" *ngIf="!slot">{{ i + 1 }}</span>
            </div>
          </div>
          
          <!-- Check Button - Always show but disabled until word is complete -->
         
        </div>

      </div>
      <div class="check mt-4">
        <button class="game-btn" 
                (click)="checkWord()"
                [disabled]="!isWordComplete || showSuccess"
                [ngClass]="{'ready': isWordComplete && !showSuccess}">
          <i class="fas fa-check me-2"></i>
          Vérifier le mot
        </button>
      </div>
      </div>
  
    </div>
 <!-- Wrong Message -->
 <div class="wrong-message" *ngIf="showWrong">
   <span>❌ Wrong!</span>
 </div>
 

  </div>
</app-game-template>

<!-- Celebration Modal (moved outside app-game-template) -->
<app-celebration 
  [show]="showLevelCompleteModal"
  [nextLevel]="level + 1"
  [data]="celebrationData"
  (close)="onCloseCelebration()"
  (goToNext)="continueToNextLevel($event)">
</app-celebration>