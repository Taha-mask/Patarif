<!-- <app-background></app-background> -->
<app-lines-background></app-lines-background>
<div class="" *ngIf="categoriesCount >= 2">
  <app-lines-background [top]="100"></app-lines-background>
</div>
<div class="" *ngIf="categoriesCount >= 1">
  <app-lines-background [top]="60"></app-lines-background>
</div>
<app-stars-background></app-stars-background>

<div class="" *ngIf="categoriesCount >= 2">

  <app-stars-background [top]="100"></app-stars-background>
</div>
<div class="" *ngIf="categoriesCount >= 1">

  <app-stars-background [top]="60"></app-stars-background>
</div>




<!-- cart -->
<app-cart-button></app-cart-button>

<div class="content">
  <!-- ✅ Loading Spinner -->
  <app-loading *ngIf="loading"></app-loading>


  <!-- ✅ Actual Content -->
  <ng-container *ngIf="!loading">
    <div class="title">
      <img class="title-background img-fluid" src="images/shopping/titleBackground.png" alt="title">
      <img class="title-collectionBackground img-fluid" src="images/shopping/titleBackgroundCollection.png" alt="title">
      <div class="title-main row">
        <img class="title-character img-fluid col-4" src="images/shopping/mainCharacter.png" alt="title">
        <div class="title-sentince col-8">
          <h1>Buy <span>Patarif</span> products to<br>be part of our family</h1>
          <p>Many great products are waiting for you</p>
        </div>
      </div>
    </div>
    <div class="products" *ngFor="let category of categories; let i = index">
      <div class="" *ngIf="productsByCategory[category].length > 0">
        <h1 class="title">
          We have many beautiful <span>{{ category | titlecase }}</span>
        </h1>

        <div class="cards-wrapper">
          <button class="scroll-btn left" (click)="scrollCards('left', i)">
            <i class="bi bi-arrow-left-short"></i>
          </button>

          <div class="cards" #cardsContainer>
            <div class="col-12 col-sm-6 col-md-4 col-lg-3 main-card" *ngFor="let product of productsByCategory[category]">
              <div class="merge-card">

                <div class="product-card">
                  <app-product-card [title]="product.title" [img]="product.images[0]" [price]="product.final_price"
                    [rate]="product.rate" [product_stock]="product.product_stock">

                  </app-product-card>
                </div>
                <button *ngIf="product.product_stock != 0" class="btn btn-primary add-to-cart"
                  (click)="navigateToProduct(product.id)">
                  Add to Cart <i class="bi bi-cart"></i>
                </button>
              </div>

            </div>
          </div>

          <button class="scroll-btn right" (click)="scrollCards('right', i)">
            <i class="bi bi-arrow-right-short"></i>
          </button>
        </div>
      </div>
    </div>

  </ng-container>
</div>
<div *ngIf="!loading" class="footer">
  <app-home-footer></app-home-footer>
</div>